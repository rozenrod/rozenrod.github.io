<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>LiteLibria</title>
    <meta property="og:site_name" content="AniLibria iPad">
    <meta property="og:type" content="Website">
    <meta property="og:title" content="AniLibria - так звучит аниме!">
    <meta property="og:description" content="Смотреть аниме онлайн в любимой озучке.">
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0" />
    <link rel="icon" id="appIcon" type="image/png" href="img/Logo.png">
    <link rel="stylesheet" type="text/css" href="css/auto.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <link rel="manifest" href="manifest/manifest.json">
    <script type="text/javascript" src="js/playerjs.js" ></script>
    <script src="js/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="js/theme.js" ></script>
    <script type="text/javascript" src="js/script.js" ></script>
    <script src="https://use.fontawesome.com/b559c64803.js"></script>

    <!-- iOS web app configuration -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AniLibria lite">

    <!-- WEB web app icons -->
    <link rel="icon" href="../img/icon/web/favicon.ico" sizes="any">
    <link rel="apple-touch-icon" href="../img/icon/web/apple-touch-icon.png">
    <!-- WEB splash screens -->
    <!-- iPad -->
    <link rel="apple-touch-startup-image" href="../img/icon/web/apple-touch-icon.png">
  </head>
  <body ontouchstart="">
    <div id="block_notif"></div>
    <div id="preloader"><div id="preloader_preload" onclick="preloader_none();"></div><p id="preloader_preload_but"><span id="loader_text">Идёт загрузка...</span><span id="loader1"></span><span id="loader2"></span></p></div>
    <a class="back_to_top" title="Наверх">↑</a>
    <header>
      <div class="block_header">
        <a href="index">Главная</a>
        <a href="catalog"  style="color: var(--card-text-color-2);background: var(--card-background-3);">Каталог</a>
        <a href="favorites">Избранное</a>
        <form class="block_search" method="get" action="search">
          <input type="text" name="q" class="search_box" placeholder="Поиск релиза...">
          <button type="submit" class="search_button"><i class="fa fa-search" aria-hidden="true"></i></button>
          <a type="submit" class="theme" id="b_theme1" onclick="theme1()" style="display: none;"><img src="img/sun.png" alt=""style="width: 20px;"></a>
          <a type="submit" class="theme" id="b_theme2" onclick="theme2()" style="display: none;"><img src="img/moon.png" alt="" style="width: 20px;"></a>
          <a type="submit" class="theme" id="b_auto" onclick="theme_auto()"><img src="img/auto.png" alt="" style="width: 20px;"></a>
        </form>
      </div>
    </header>
    <div class="article-block" id="sorting_block_none">
      <center>
        <div class="article-list block_header_small block_chosen">
            <!-- <a class="pages_catalog" href="" style="cursor:pointer;">⇅</a> -->
            <div class="select_form">
              <select class="chosen_box" id="Genres_block">
                <option value="0">Выбрать жанры</option>
              </select>
              <script type="text/javascript">
                url = "https://api.anilibria.tv/v2/getGenres"
                fetch(url)
                .then(function (response) {
                  if (response.status !== 200) {
                    return Promise.reject(new Error(response.statusText))
                  }
                  return Promise.resolve(response)
                })
                .then(function (response) {
                  return response.json()
                })
                .then(function (data_Genres) {
                  for (let i = 0; data_Genres[i]; i++) {
                    var cookie_genres = localStorage.getItem('my_genres');
                    if (!cookie_genres) {localStorage.setItem('my_genres', '');}
                    var List_cookie_genres = cookie_genres.split(/\s*,\s*/);
                    if (!List_cookie_genres.includes(data_Genres[i])) {
                      var div_Genres = document.createElement('option');
                      document.getElementById('Genres_block').appendChild(div_Genres);
                      div_Genres.value = data_Genres[i];
                      div_Genres.innerHTML = data_Genres[i];
                    }
                  }
                })

              .catch(function (error) {
                console.log('error', error)
              })
              </script>
              <select class="chosen_box" id="Years_block">
                <option value="0">Выбрать год</option>
              </select>
              <script type="text/javascript">
                url = "https://api.anilibria.tv/v2/getYears"

                fetch(url)
                .then(function (response) {
                  if (response.status !== 200) {
                    return Promise.reject(new Error(response.statusText))
                  }
                  return Promise.resolve(response)
                })
                .then(function (response) {
                  return response.json()
                })
                .then(function (data_Years) {
                  for (let i = 0; data_Years[i]; i++) {
                    var div_Years = document.createElement('option');
                    document.getElementById('Years_block').appendChild(div_Years);
                    div_Years.value = data_Years[i];
                    div_Years.innerHTML = data_Years[i];
                  }
                })

              .catch(function (error) {
                console.log('error', error)
              })
              </script>
              <select class="chosen_box" id="Season_block">
                <option value="0">Выбрать сезон</option>
                <option value="1">Зима</option>
                <option value="2">Весна</option>
                <option value="3">Лето</option>
                <option value="4">Осень</option>
              </select>
              <select class="chosen_box" id="Sorting_block">
                <option value="0">Сортировать по ...</option>
                <option value="year">Году</option>
                <option value="codes">Названию</option>
                <option value="in_favorites">Популярности</option>
                <option value="series">Количеству серий</option>
                <option value="code">Типу</option>
              </select>
              <label class="container">
                <input type="checkbox" checked="checked" id="checkbox_sorting">
                <span class="checkmark"></span>
              </label>
              <button class="chosen_button" onclick="load_sortingTitles('Catalog', '0');">Показать</button>
            </div>
        </div>
      </center>
    </div>
    <div class="article-block">
      <center>
        <div class="article-list block_header_small">
          <h1 style="font-weight: 500;text-align: left;color: var(--card-text-color);padding: 0px 0px 10px 10px;font-size: 24px;">Все тайтлы</h1>
          <div id="error" style="display:none;">
            <h1 style="color: var(--card-text-color);">Ничего не найдено!</h1>
            <br>
            <img src="img/libriatyan/1.png" style="max-width: 90%;">
          </div>
          <div id="article_block"></div>
          <br /><br />
          <span id="load_new_article"></span>
          <input type="button" class="pstrnav pages_catalog" onclick="load_new('1')" value="Загрузить ещё" style="font-size: 16px;">
        </div>

      </center>
    </div>
    <br /><br /><br /><br />

  <script type="text/javascript">
    load_api_cash('Catalog', '0');

    function onEntry(entry) {
      entry.forEach(change => {
        if (change.isIntersecting) {
          var my_page = JSON.parse(localStorage.getItem('my_page'));
          var arr_api = JSON.parse(localStorage.getItem('my_api_cash'));
          if (arr_api) {
            load_new('1');
          }
        }
      });
    }
    let options = { threshold: [0.5] };
    let observer = new IntersectionObserver(onEntry, options);
    let elements = document.querySelectorAll('#load_new_article');
    for (let elm of elements) {
      observer.observe(elm);
    }



    Scroll_to_top();
  </script>

  <a href="https://rozenrod.ml" style="font-size: 15px;font-weight: 300;text-decoration: none;background: var(--card-background-2);padding: 5px 10px;color: var(--card-text-color);float: right;margin-bottom: 20px;margin-right: 15px;border-radius: var(--border-radius);">Rozenrod 2022</a><br />
</body>
</html>

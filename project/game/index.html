<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Rozenrod GAME</title>
	<link rel="manifest" href="manifest.json">
</head>
<body>
<style>
	@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');

	:root{
		/* Theme 1 */
    --ColorThemes0: #a5b1b5;
    --ColorThemes1: #f7f7f7;
		--ColorThemes2: #fff;
    --Player1: #f1d893;
    --Player2: #bbe1b0;
    --Player3: #7ca0c5;
    --Player4: #747474;
		
		/* Theme 2 */
    --ColorThemes0: #ffffff;
    --ColorThemes1: #6a9ef1;
		--ColorThemes2: #3f7ee5;
    --Player1: #fbfa90;
    --Player2: #b8f9a5;
    --Player3: #ecbaff;
    --Player4: #838383;

		/* Theme 3 */
		/* --ColorThemes0: #ffffff;
    --ColorThemes1: #3c3c3c;
		--ColorThemes2: #5c5c5c;
    --Player1: #fbfa90;
    --Player2: #b8f9a5;
    --Player3: #7ca0c5;
    --Player4: #838383; */

		--radius: 34px;
    --border: 8px solid var(--ColorThemes0);
    --margin: 58px;
    --padding: 25px;
	}

	*{
		border: 0;
		margin: 0;
		padding: 0;
		font-family: 'Roboto', sans-serif;
		color: var(--ColorThemes0);
	}

	body{
		display: block;
	}

	.control{
    display: flex;
    margin-top: 10px;
    margin-bottom: 10px;
    align-items: center;
    justify-content: space-around;

	}
	button{
		text-decoration: none;
    font-size: 15px;
    font-weight: 400;
    height: 30px;
    color: var(--ColorThemes0);
    padding: 2px 10px;
    background: var(--ColorThemes1);
    border-radius: 15px;
    margin-left: 10px;
    cursor: pointer;
    border: 0;
	}

	#app{
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
	}

	#Game{
    overflow: hidden;
    border-radius: 15px;
	}

	.Game_Controll{
    width: calc(100% - 10px);
    min-height: 100px;
    border-radius: 15px;
    display: flex;
    position: relative;
    flex-direction: row;
    align-content: space-around;
    justify-content: space-evenly;
    align-items: center;
    margin: 0 10px;
	}

	.Game_Controll_L{
    margin: 5px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    height: 180px;
	}
	#player{
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: center;
    align-items: center;
    align-content: center;
    border-radius: 15px;
    overflow: hidden;
	}
	#timer{
    display: flex;
    height: 100px;
    background: var(--ColorThemes1);
    flex-direction: row;
    width: 240px;
    justify-content: space-around;
    align-items: center;
    border-radius: 15px;
	}
	#time{
		display: flex;
    width: 80px;
    height: 80px;
    border-radius: 15px;
    align-items: center;
    justify-content: center;
    font-size: 25px;
	}
	#playB{
		display: flex;
    width: 80px;
    height: 80px;
    background: var(--ColorThemes2);
    border-radius: 15px;
    align-items: center;
    justify-content: center;
	}
	#playB svg {
		width: 50px;
		fill: var(--ColorThemes0);
	}




	.Game_Controll_R{
    width: 70%;
		margin: 5px;
		display: flex;
	}
	#prev{
		width: 30%;
    background: var(--ColorThemes1);
		height: 180px;
		display: flex;
    justify-content: center;
    align-items: center;
		cursor: pointer;
		border-radius: 15px;
    margin: 5px;
	}
	#next{
    width: 70%;
    background: var(--ColorThemes1);
    height: 180px;
		display: flex;
    justify-content: center;
    align-items: center;
		cursor: pointer;
		border-radius: 15px;
    margin: 5px;
	}

	#prev svg, #next svg{
		width: 130px;
		fill: var(--ColorThemes0);
	}
	
	.Grid{
		display: flex;
	}
	.BlockGrid{
		width: 60px;
		height: 60px;
		margin: 0px;
		background: var(--ColorThemes1);
		display: flex;
		align-items: center;
		justify-content: center;
		overflow: hidden;
		cursor: pointer;
	}

	.BlockGrid span {z-index: 9999;}

	.textMap{
		position: absolute;
    z-index: 9999;
		background: #28b7a2;
    color: #fff;
    width: 30px;
    height: 30px;
    display: flex;
    border-radius: 15px;
    align-items: center;
    justify-content: center;
	}
	
	.p1{background: var(--Player1);}
	.p2{background: var(--Player2);}
	.p3{background: var(--Player3);}
	.p4{background: var(--Player4);}
	
	.cilcule{width: 30px;height: 30px;border-radius: 30px;position: absolute;border: 10px solid var(--ColorThemes0);}
	
	.StartCilcule{width: 40px;height: 40px;background: var(--ColorThemes0);border-radius: 30px;position: absolute;}

	.StartR{width: 30px;height: 8px;background: var(--ColorThemes0);margin: 0 30px 0 0;}
	
	.StartL{width: 30px;height: 8px;background: var(--ColorThemes0);margin: 0 0 0 30px;}
	
	.StartT{width: 8px;height: 30px;background: var(--ColorThemes0);margin: 0 0 30px 0;}
	
	.StartB{width: 8px;height: 30px;background: var(--ColorThemes0);margin: 30px 0 0 0;}
	
	.lineH{width: 60px;height: 8px;background: var(--ColorThemes0);}
	
	.lineV{width: 8px;height: 60px;background: var(--ColorThemes0);}
	
	/* .TL{border-radius: 20px;border-left: 8px solid var(--ColorThemes0);border-bottom: 8px solid var(--ColorThemes0);margin-bottom: 50px;margin-left: 50px;padding: 25px;}
	
	.TR{border-radius: 20px;border-right: 8px solid var(--ColorThemes0);border-bottom: 8px solid var(--ColorThemes0);margin-bottom: 50px;margin-right: 50px;padding: 25px;}
	
	.BL{border-radius: 20px;border-left: 8px solid var(--ColorThemes0);border-top: 8px solid var(--ColorThemes0);margin-top: 50px;margin-left: 50px;padding: 25px;}
	
	.BR{border-radius: 20px;border-right: 8px solid var(--ColorThemes0);border-top: 8px solid var(--ColorThemes0);margin-top: 50px;margin-right: 50px;padding: 25px;} */

	.TL{border-radius: var(--radius);border: var(--border);margin-bottom: var(--margin);margin-left: var(--margin);padding: var(--padding);}
	.TR{border-radius: var(--radius);border: var(--border);margin-bottom: var(--margin);margin-right: var(--margin);padding: var(--padding);}
	.BL{border-radius: var(--radius);border: var(--border);margin-top: var(--margin);margin-left: var(--margin);padding: var(--padding);}
	.BR{border-radius: var(--radius);border: var(--border);margin-top: var(--margin);margin-right: var(--margin);padding: var(--padding);}
	
</style>
	<div class="control">
		<div>
			<button onclick="setData0()">0</button>
			<button onclick="setData1()">1</button>
			<button onclick="setData2()">2</button>
			<button onclick="setData3()">3</button>
			<button onclick="setData4()">4</button>
			<button onclick="setData5()">5</button>
			<button onclick="setData6()">6</button>
		</div>
		<div>
			<div class="control" id="controlPrevMap" style="display: none;">
				<button onclick="clearData()">Очистить поле</button>
				<button onclick="prevMap()" id="backButt">Назад</button>
				<button onclick="clearMap()">Удалить номера</button>
				<button onclick="downloadFile()">Скачать</button>
			</div>
	
			<div class="control">
				<button onclick="p1 = 0; p2 = 0; p3 = 0; p4 = 0;generateMaps();setTimer();">Играть сначала</button>
				<button onclick="editMap()">Настроить порядок</button>
				<button onclick="editPole()">Изменять ячейки</button>
			</div>
		</div>
	</div>

	<div id="app">
		<div id="Game"></div>
	</div>

	<div class="Game_Controll" id="controlGrid">
		<div class="Game_Controll_L">
			<div id="player">
				<div class="BlockGrid" onclick="valuePlayer(1)"> <div class="cilcule p1" id="Player1" style="opacity: 0.5;"></div> <span id="PlayerPoint1">0</span></div>
				<div class="BlockGrid" onclick="valuePlayer(2)"> <div class="cilcule p2" id="Player2" style="opacity: 0.5;"></div> <span id="PlayerPoint2">0</span></div>
				<div class="BlockGrid" onclick="valuePlayer(3)"> <div class="cilcule p3" id="Player3" style="opacity: 0.5;"></div> <span id="PlayerPoint3">0</span></div>
				<div class="BlockGrid" onclick="valuePlayer(4)"> <div class="cilcule p4" id="Player4" style="opacity: 0.5;"></div> <span id="PlayerPoint4">0</span></div>
			</div>

			<div id="timer">
				<div id="time">00:00</div>

				<div id="playB" onclick="timer()">
					<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 172 172"><path d="M71.66667,7.16667c-3.956,0 -7.16667,3.21067 -7.16667,7.16667c0,3.956 3.21067,7.16667 7.16667,7.16667h28.66667c3.956,0 7.16667,-3.21067 7.16667,-7.16667c0,-3.956 -3.21067,-7.16667 -7.16667,-7.16667zM136.12468,22.96973c-1.8275,0.1496 -3.60584,1.00736 -4.88509,2.51953c-2.5585,3.01717 -2.17732,7.54045 0.83985,10.10612l10.2041,8.65039c3.01717,2.5585 7.54045,2.17732 10.10612,-0.83984c2.5585,-3.01717 2.17732,-7.54045 -0.83985,-10.10612l-10.2041,-8.65039c-1.50858,-1.27925 -3.39352,-1.82929 -5.22102,-1.67969zM86,28.66667c-35.561,0 -64.5,28.939 -64.5,64.5c0,35.561 28.939,64.5 64.5,64.5c35.561,0 64.5,-28.939 64.5,-64.5c0,-35.561 -28.939,-64.5 -64.5,-64.5zM86,50.16667c3.956,0 7.16667,3.21067 7.16667,7.16667v35.83333c0,3.956 -3.21067,7.16667 -7.16667,7.16667c-3.956,0 -7.16667,-3.21067 -7.16667,-7.16667v-35.83333c0,-3.956 3.21067,-7.16667 7.16667,-7.16667z"></path></svg>
				</div>
			</div>
		</div>

		<div class="Game_Controll_R" id="button_control" style="opacity: 0.5;">
			<div id="prev" onclick="prev()">
				<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 172 172"><path d="M71.15783,86l27.38383,-27.38383c2.967,-2.967 2.967,-7.783 0,-10.75v0c-2.967,-2.967 -7.783,-2.967 -10.75,0l-33.067,33.067c-2.80217,2.80217 -2.80217,7.33867 0,10.13367l33.067,33.067c2.967,2.967 7.783,2.967 10.75,0v0c2.967,-2.967 2.967,-7.783 0,-10.75z"></path></svg>
			</div>
			<div id="next" onclick="next()">
				<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 172 172"><path d="M93.6755,86l-27.38383,-27.38383c-2.967,-2.967 -2.967,-7.783 0,-10.75v0c2.967,-2.967 7.783,-2.967 10.75,0l33.067,33.067c2.80217,2.80217 2.80217,7.33867 0,10.13367l-33.067,33.067c-2.967,2.967 -7.783,2.967 -10.75,0v0c-2.967,-2.967 -2.967,-7.783 0,-10.75z"></path></svg>
			</div>
		</div>
	</div>

	<a id="downloadAnchorElem" style="display:none"></a>


<script>
	let poleDef = [
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null]
	];

	let pole = [
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null]
	];

	let poleMap = [
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null],
		[null, null, null, null, null, null, null, null, null, null]
	];

	let poleLine = [];

	let StartEnd = [];

	var p1 = 0, p2 = 0, p3 = 0, p4 = 0;

	var Player = 1;

	var nMap = 0;
	var edMap = 0;
	var edPole = 0;

	var blockBut = 1;

	let timerId;
	var timeTimer = 60000;
	

	GetData();

	function setTimer(){
		timeTimerPrompt = prompt("Задать таймер (сек)", 60);
		if (timeTimerPrompt == null || timeTimerPrompt == "") {
			timeTimer = 60000;
		} else {
			timeTimer = timeTimerPrompt * 1000
		}
		clearInterval(timerId);
		document.getElementById('time').innerHTML = `00:00`;
		document.getElementById('playB').style.opacity = 1;
		document.getElementById('button_control').style.opacity = 0.5;
		blockBut = 1;
		Player = 1;
		generateMaps();
	}

	function timer(){
		if(blockBut == 1){
			document.getElementById('playB').style.opacity = 0.5;
			document.getElementById('button_control').style.opacity = 1;
			blockBut = 0;

			// повторить с интервалом 1 секунды
			var timerN = 0;
			timerId = setInterval(function (){
				timerN++;
				document.getElementById('time').innerHTML = timerN < 10 ? `00:0${timerN}` : `00:${timerN}`;
			}, 1000);

			// остановить вывод через 60 секунд
			setTimeout(function (){
				clearInterval(timerId);
				document.getElementById('time').innerHTML = `00:00`;

				document.getElementById('playB').style.opacity = 1;

				document.getElementById('button_control').style.opacity = 0.5;
				blockBut = 1;

				Player++;
				if(Player==5){
					Player = 1;
				}
				generateMaps()
			}, timeTimer);
		} else {
			clearInterval(timerId);
			document.getElementById('time').innerHTML = `00:00`;

			document.getElementById('playB').style.opacity = 1;

			document.getElementById('button_control').style.opacity = 0.5;
			blockBut = 1;

			Player++;
			if(Player==5){
				Player = 1;
			}
			generateMaps()
		}
	}

	function generateMaps(){
		if(Player==1) document.getElementById('Player1').style.opacity = 1; else document.getElementById('Player1').style.opacity = 0.5;
		if(Player==2) document.getElementById('Player2').style.opacity = 1; else document.getElementById('Player2').style.opacity = 0.5;
		if(Player==3) document.getElementById('Player3').style.opacity = 1; else document.getElementById('Player3').style.opacity = 0.5;
		if(Player==4) document.getElementById('Player4').style.opacity = 1; else document.getElementById('Player4').style.opacity = 0.5;

		document.getElementById('PlayerPoint1').innerHTML = p1;
		document.getElementById('PlayerPoint2').innerHTML = p2;
		document.getElementById('PlayerPoint3').innerHTML = p3;
		document.getElementById('PlayerPoint4').innerHTML = p4;

		saveData();
		if(edMap == 1)document.getElementById('backButt').innerHTML = `(${nMap+1}) Назад`;

		document.getElementById('Game').innerHTML = "";

		num = 0;
		for (let i = 0; pole.length > i; i++) {
			var div = document.createElement('div');
			document.getElementById('Game').appendChild(div);
			div.className = 'Grid';
			for (let q = 0; pole[i].length > q; q++) {
				num++;
				if(pole[i][q] == 1) div.innerHTML +=      `<div class="BlockGrid" id="BlockGrid${poleMap[i][q]}" onclick="edit(${i}, ${q}, 2)"><span style="display: ${edMap == 0 ? 'none' : 'flex'}" class="textMap">${poleMap[i][q] == null ? '' : poleMap[i][q]}</span> <div id="Border${poleMap[i][q]}" class="lineH"></div></div>`;
				else if(pole[i][q] == 2) div.innerHTML += `<div class="BlockGrid" id="BlockGrid${poleMap[i][q]}" onclick="edit(${i}, ${q}, 3)"><span style="display: ${edMap == 0 ? 'none' : 'flex'}" class="textMap">${poleMap[i][q] == null ? '' : poleMap[i][q]}</span> <div id="Border${poleMap[i][q]}" class="lineV"></div></div>`;
				else if(pole[i][q] == 3) div.innerHTML += `<div class="BlockGrid" id="BlockGrid${poleMap[i][q]}" onclick="edit(${i}, ${q}, 4)"><span style="display: ${edMap == 0 ? 'none' : 'flex'}" class="textMap">${poleMap[i][q] == null ? '' : poleMap[i][q]}</span> <div id="Border${poleMap[i][q]}" class="TL"></div></div>`;
				else if(pole[i][q] == 4) div.innerHTML += `<div class="BlockGrid" id="BlockGrid${poleMap[i][q]}" onclick="edit(${i}, ${q}, 5)"><span style="display: ${edMap == 0 ? 'none' : 'flex'}" class="textMap">${poleMap[i][q] == null ? '' : poleMap[i][q]}</span> <div id="Border${poleMap[i][q]}" class="BL"></div></div>`;
				else if(pole[i][q] == 5) div.innerHTML += `<div class="BlockGrid" id="BlockGrid${poleMap[i][q]}" onclick="edit(${i}, ${q}, 6)"><span style="display: ${edMap == 0 ? 'none' : 'flex'}" class="textMap">${poleMap[i][q] == null ? '' : poleMap[i][q]}</span> <div id="Border${poleMap[i][q]}" class="BR"></div></div>`;
				else if(pole[i][q] == 6) div.innerHTML += `<div class="BlockGrid" id="BlockGrid${poleMap[i][q]}" onclick="edit(${i}, ${q}, 7)"><span style="display: ${edMap == 0 ? 'none' : 'flex'}" class="textMap">${poleMap[i][q] == null ? '' : poleMap[i][q]}</span> <div id="Border${poleMap[i][q]}" class="TR"></div></div>`;
				else if(pole[i][q] == 7) div.innerHTML += `<div class="BlockGrid" id="BlockGrid${poleMap[i][q]}" onclick="edit(${i}, ${q}, 8)"><span style="display: ${edMap == 0 ? 'none' : 'flex'}" class="textMap">${poleMap[i][q] == null ? '' : poleMap[i][q]}</span> <div id="StartCilcule${poleMap[i][q]}" class="StartCilcule"></div> <div class="StartT" id="Start${poleMap[i][q]}"></div></div>`;
				else if(pole[i][q] == 8) div.innerHTML += `<div class="BlockGrid" id="BlockGrid${poleMap[i][q]}" onclick="edit(${i}, ${q}, 9)"><span style="display: ${edMap == 0 ? 'none' : 'flex'}" class="textMap">${poleMap[i][q] == null ? '' : poleMap[i][q]}</span> <div id="StartCilcule${poleMap[i][q]}" class="StartCilcule"></div> <div class="StartL" id="Start${poleMap[i][q]}"></div></div>`;
				else if(pole[i][q] == 9) div.innerHTML += `<div class="BlockGrid" id="BlockGrid${poleMap[i][q]}" onclick="edit(${i}, ${q}, 10)"><span style="display: ${edMap == 0 ? 'none' : 'flex'}" class="textMap">${poleMap[i][q] == null ? '' : poleMap[i][q]}</span> <div id="StartCilcule${poleMap[i][q]}" class="StartCilcule"></div> <div class="StartB" id="Start${poleMap[i][q]}"></div></div>`;
				else if(pole[i][q] == 10) div.innerHTML += `<div class="BlockGrid" id="BlockGrid${poleMap[i][q]}" onclick="edit(${i}, ${q}, 0)"><span style="display: ${edMap == 0 ? 'none' : 'flex'}" class="textMap">${poleMap[i][q] == null ? '' : poleMap[i][q]}</span> <div id="StartCilcule${poleMap[i][q]}" class="StartCilcule"></div><div class="StartR" id="Start${poleMap[i][q]}"></div></div>`;
				else div.innerHTML += `<div class="BlockGrid" id="BlockGrid${poleMap[i][q]}" onclick="edit(${i}, ${q}, 1)"></div>`;
			}
		}

		
		if(p1 != 0) document.getElementById('BlockGrid'+p1).innerHTML += `<div class="cilcule p1" style="z-index: ${Player==1 ? '999' : '1'}"></div>`;
		if(p2 != 0) document.getElementById('BlockGrid'+p2).innerHTML += `<div class="cilcule p2" style="z-index: ${Player==2 ? '999' : '1'}"></div>`;
		if(p3 != 0) document.getElementById('BlockGrid'+p3).innerHTML += `<div class="cilcule p3" style="z-index: ${Player==3 ? '999' : '1'}"></div>`;
		if(p4 != 0) document.getElementById('BlockGrid'+p4).innerHTML += `<div class="cilcule p4" style="z-index: ${Player==4 ? '999' : '1'}"></div>`;

		editColor(Math.max(p1,p2,p3,p4));
	}

	function edit(i,q, p){
		if(edMap==0){
			if(edPole == 1){
				if(JSON.stringify(pole) == JSON.stringify(poleDef)){
					if(p == 1) pole[i][q] = 7;
				} else {
					pole[i][q] = p;
				}
			}
		} else {
			nMap++;
			if(p == 2 || p == 3) poleLine.push(nMap);
			console.log(p);
			if(p == 8 || p == 9 || p == 10 || p == 0) StartEnd.push(nMap);
			poleMap[i][q] = nMap;
		}

		generateMaps();
	}

	function editMap(){
		if(edMap==0){
			if(edPole==1)edPole=0;
			edMap=1;
			document.getElementById('controlPrevMap').style.display = 'flex';
			document.getElementById('controlGrid').style.display = 'none';
		} else {
			edMap=0;
			edPole=0;
			document.getElementById('controlPrevMap').style.display = 'none';
			document.getElementById('controlGrid').style.display = 'flex';
		}
		generateMaps();
	}
	function editPole(){
		if(edPole==0){
			if(edMap==1)edMap=0;
			edPole=1;
			document.getElementById('controlPrevMap').style.display = 'flex';
			document.getElementById('controlGrid').style.display = 'none';
		} else {
			edMap=0;
			edPole=0;
			document.getElementById('controlPrevMap').style.display = 'none';
			document.getElementById('controlGrid').style.display = 'flex';
		}
		generateMaps();
	}

	function editColor(n){
		if(p1 > p2 && p1 > p3 && p1 > p4) BorderColor = "var(--Player1)";
		if(p2 > p1 && p2 > p3 && p2 > p4) BorderColor = "var(--Player2)";
		if(p3 > p1 && p3 > p2 && p3 > p4) BorderColor = "var(--Player3)";
		if(p4 > p1 && p4 > p2 && p4 > p3) BorderColor = "var(--Player4)";

		if(n == 0) return;
		for (let i = 1; n > i; i++) {
			if(!StartEnd.includes(i) && !poleLine.includes(i)) document.getElementById('Border'+i).style.borderColor = BorderColor;
			if(poleLine.includes(i)) document.getElementById('Border'+i).style.background = BorderColor;

			if(StartEnd.includes(i)){ 
				document.getElementById('Start'+i).style.background = BorderColor;
				document.getElementById('StartCilcule'+i).style.background = BorderColor;
			}
		}
	}

	function valuePlayer(n){
		Player = n;
		 generateMaps();
	}

	function prevMap(){
		if(nMap > 0) {
			poleLine.splice(nMap,1);
			nMap--;
		}
		generateMaps();
	}

	function clearMap(){
		poleMap =  [[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],];
		poleDef =  [[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],];
		poleLine = [];
		StartEnd = [];
		nMap = 0;
		saveData();
		generateMaps();
	}

	function prev(){
		if(blockBut == 0){
			if(Player == 1 && p1 > 0) p1--;
			else if(Player == 2 && p2 > 0) p2--;
			else if(Player == 3 && p3 > 0) p3--;
			else if(Player == 4 && p4 > 0) p4--;
			generateMaps();
		}
	}

	function next(){
		if(blockBut == 0){
			if(Player == 1) p1++;
			else if(Player == 2) p2++;
			else if(Player == 3) p3++;
			else if(Player == 4) p4++;
			if(p1 == StartEnd[1]){
				alert("Выиграл Игрок 1");
				p1 = 0, p2 = 0, p3 = 0, p4 = 0;
				clearInterval(timerId);
				document.getElementById('playB').style.opacity = 1;
				document.getElementById('button_control').style.opacity = 0.5;
				blockBut = 1;
				Player=1;
				generateMaps()
			} else if(p2 == StartEnd[1]) {
				alert("Выиграл Игрок 2");
				p1 = 0, p2 = 0, p3 = 0, p4 = 0;
				clearInterval(timerId);
				document.getElementById('playB').style.opacity = 1;
				document.getElementById('button_control').style.opacity = 0.5;
				blockBut = 1;
				Player=1;
				generateMaps()
			} else if(p3 == StartEnd[1]) {
				alert("Выиграл Игрок 3");
				p1 = 0, p2 = 0, p3 = 0, p4 = 0;
				clearInterval(timerId);
				document.getElementById('playB').style.opacity = 1;
				document.getElementById('button_control').style.opacity = 0.5;
				blockBut = 1;
				Player=1;
				generateMaps()
			} else if(p4 == StartEnd[1]) {
				alert("Выиграл Игрок 4");
				p1 = 0, p2 = 0, p3 = 0, p4 = 0;
				clearInterval(timerId);
				document.getElementById('playB').style.opacity = 1;
				document.getElementById('button_control').style.opacity = 0.5;
				blockBut = 1;
				Player=1;
				generateMaps()
			}
			generateMaps();
		}
	}

	function GetData(){
		if(localStorage.getItem("Player") == null) clearData();
		
		pole = JSON.parse(localStorage.getItem("pole"));
		poleMap = JSON.parse(localStorage.getItem("poleMap"));
		poleLine = JSON.parse(localStorage.getItem("poleLine"));
		StartEnd = JSON.parse(localStorage.getItem("StartEnd"));
		p1 = Number(localStorage.getItem("p1"));
		p2 = Number(localStorage.getItem("p2"));
		p3 = Number(localStorage.getItem("p3"));
		p4 = Number(localStorage.getItem("p4"));
		Player = Number(localStorage.getItem("Player"));
		nMap = Number(localStorage.getItem("nMap"));
		generateMaps();
	}

	function saveData(){
		localStorage.setItem("pole", JSON.stringify(pole));
		localStorage.setItem("poleMap", JSON.stringify(poleMap));
		localStorage.setItem("poleLine", JSON.stringify(poleLine));
		localStorage.setItem("StartEnd", JSON.stringify(StartEnd));
		localStorage.setItem("p1", p1);
		localStorage.setItem("p2", p2);
		localStorage.setItem("p3", p3);
		localStorage.setItem("p4", p4);
		localStorage.setItem("Player", Player);
		localStorage.setItem("nMap", nMap);
	}

	function clearData(){
		pole = [[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],];
		poleMap =  [[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],];
		poleDef =  [[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],[null, null, null, null, null, null, null, null, null, null, null, null, null],];
		poleLine = [];
		StartEnd = [];
		p1 = 0, p2 = 0, p3 = 0, p4 = 0;
		Player = 1;
		nMap = 0;
		saveData();
		generateMaps();
	}

	function setData0(){
		setTimer();
		pole = [[4,1,1,1,1,1,1,1,1,5],[2,4,1,1,1,5,9,4,5,2],[2,2,4,1,5,2,2,2,2,2],[2,2,2,null,3,6,2,2,2,2],[2,2,2,4,1,1,6,2,2,2],[2,2,2,2,8,1,10,2,2,2],[2,2,2,3,1,1,5,2,2,2],[2,2,3,1,1,1,6,2,2,2],[2,3,1,1,1,1,1,6,2,2],[3,1,1,1,1,1,1,1,6,7]];
		poleMap = [[19,18,17,16,15,14,13,12,11,10],[20,65,66,67,68,69,96,45,44,9],[21,64,75,74,73,70,95,46,43,8],[22,63,76,null,72,71,94,47,42,7],[23,62,77,90,91,92,93,48,41,6],[24,61,78,89,null,null,null,49,40,5],[25,60,79,88,87,86,85,50,39,4],[26,59,80,81,82,83,84,51,38,3],[27,58,57,56,55,54,53,52,37,2],[28,29,30,31,32,33,34,35,36,1]];
		poleLine = [2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,29,30,31,32,33,34,35,37,38,39,40,41,42,43,46,47,48,49,50,51,53,54,55,56,57,59,60,61,62,63,64,66,67,68,70,74,76,77,78,79,81,82,83,86,87,89,91,92,94,95];
		StartEnd = [1,96];
		p1 = 0, p2 = 0, p3 = 0, p4 = 0;
		Player = 1;
		nMap = 0;
		saveData();
		generateMaps();
	}
	function setData1(){
		setTimer();
		pole = [[8,1,5,3,6,4,1,5,3,6,4,1,10],[4,5,3,5,4,6,9,3,5,4,6,4,5],[3,6,4,6,3,5,7,4,6,3,5,3,6],[4,5,3,5,4,6,9,3,5,4,6,4,5],[3,6,4,6,3,5,7,4,6,3,5,3,6],[4,5,3,5,4,6,9,3,5,4,6,4,5],[3,6,4,6,3,5,7,4,6,3,5,3,6],[4,5,3,5,4,6,9,3,5,4,6,4,5],[3,6,4,6,3,5,7,4,6,3,5,3,6],[4,5,3,5,4,6,9,3,5,4,6,4,5],[3,6,4,6,3,5,7,4,6,3,5,3,6],[4,5,3,5,4,6,9,3,5,4,6,4,5],[3,6,9,3,6,4,7,5,3,6,9,3,6]];
		poleMap = [[1,2,3,null,null,50,51,52,null,null,99,100,101],[null,null,4,5,48,49,null,53,54,97,98,null,null],[null,null,7,6,47,46,null,56,55,96,95,null,null],[null,null,8,9,44,45,null,57,58,93,94,null,null],[null,null,11,10,43,42,null,60,59,92,91,null,null],[null,null,12,13,40,41,null,61,62,89,90,null,null],[null,null,15,14,39,38,null,64,63,88,87,null,null],[null,null,16,17,36,37,null,65,66,85,86,null,null],[null,null,19,18,35,34,null,68,67,84,83,null,null],[null,null,20,21,32,33,null,69,70,81,82,null,null],[null,null,23,22,31,30,null,72,71,80,79,null,null],[null,null,24,25,28,29,null,73,74,77,78,null,null],[null,null,null,26,27,null,null,null,75,76,null,null,null]];
		poleLine = [2,51,100];
		StartEnd = [1,101];
		p1 = 0, p2 = 0, p3 = 0, p4 = 0;
		Player = 1;
		nMap = 0;
		saveData();
		generateMaps();
	}
	function setData2(){
		setTimer();
		pole = [[8,1,1,1,1,5,4,1,1,1,5,4,5],[4,1,1,1,1,6,2,4,1,1,6,2,2],[2,4,1,1,1,1,6,2,4,1,5,2,2],[2,2,4,1,1,1,1,6,2,4,6,2,2],[2,2,2,4,1,1,1,1,6,3,1,6,7],[2,2,2,3,1,1,1,1,1,1,1,1,5],[2,2,3,1,1,1,1,1,1,1,1,5,2],[2,3,1,1,1,1,1,1,1,1,5,2,2],[3,1,1,1,1,1,1,1,5,9,2,2,2],[4,1,1,5,8,10,4,1,6,7,2,2,2],[3,1,5,3,1,1,6,4,1,1,6,2,2],[4,1,6,8,1,1,10,2,4,1,1,6,2],[3,1,1,1,1,1,1,6,3,1,1,1,6]];
		poleMap = [[1,2,3,4,5,6,81,82,83,84,85,156,157],[12,11,10,9,8,7,80,89,88,87,86,155,158],[13,74,75,76,77,78,79,90,145,146,147,154,159],[14,73,96,95,94,93,92,91,144,149,148,153,160],[15,72,97,138,139,140,141,142,143,150,151,152,161],[16,71,98,137,136,135,134,133,132,131,130,129,128],[17,70,99,100,101,102,103,104,105,106,107,108,127],[18,69,68,67,66,65,64,63,62,61,60,109,126],[19,20,21,22,23,24,25,26,27,null,59,110,125],[38,37,36,35,null,null,30,29,28,null,58,111,124],[39,40,41,34,33,32,31,54,55,56,57,112,123],[44,43,42,null,null,null,null,53,116,115,114,113,122],[45,46,47,48,49,50,51,52,117,118,119,120,121]];
		poleLine = [2,3,4,5,8,9,10,11,13,14,15,16,17,18,20,21,22,23,24,25,26,29,32,33,36,37,40,43,46,47,48,49,50,51,53,55,56,58,59,61,62,63,64,65,66,67,68,70,71,72,73,75,76,77,78,80,82,83,84,87,88,90,92,93,94,95,97,98,100,101,102,103,104,105,106,107,109,110,111,112,114,115,118,119,120,122,123,124,125,126,127,129,130,131,132,133,134,135,136,139,140,141,142,144,146,151,153,154,155,158,159,160];
		StartEnd = [1,161];
		p1 = 0, p2 = 0, p3 = 0, p4 = 0;
		Player = 1;
		nMap = 0;
		saveData();
		generateMaps();
	}
	function setData3(){
		setTimer();
		pole = [[4,1,1,1,1,1,1,1,1,1,1,1,5],[2,4,1,1,1,5,4,1,1,1,5,4,6],[2,2,8,1,5,2,2,4,1,1,6,3,5],[2,2,4,1,6,2,2,2,4,5,4,5,2],[2,2,3,1,5,2,2,2,2,2,2,2,2],[2,2,4,1,6,2,2,2,2,2,2,2,2],[2,2,3,1,5,2,2,2,2,2,2,2,2],[2,2,4,1,6,2,2,2,2,2,2,2,2],[2,2,3,1,5,2,2,2,2,2,2,2,2],[2,2,4,1,6,2,2,2,2,2,2,2,2],[2,2,3,1,5,2,2,2,2,2,2,2,2],[2,2,4,1,6,2,2,2,2,2,2,2,2],[3,6,3,1,1,6,7,3,6,3,6,3,6]];
		poleMap = [[97,96,95,94,93,92,91,90,89,88,87,86,85],[98,121,122,123,124,125,12,13,14,15,16,83,84],[99,120,169,168,167,126,11,20,19,18,17,82,81],[100,119,164,165,166,127,10,21,40,41,60,61,80],[101,118,163,162,161,128,9,22,39,42,59,62,79],[102,117,158,159,160,129,8,23,38,43,58,63,78],[103,116,157,156,155,130,7,24,37,44,57,64,77],[104,115,152,153,154,131,6,25,36,45,56,65,76],[105,114,151,150,149,132,5,26,35,46,55,66,75],[106,113,146,147,148,133,4,27,34,47,54,67,74],[107,112,145,144,143,134,3,28,33,48,53,68,73],[108,111,140,141,142,135,2,29,32,49,52,69,72],[109,110,139,138,137,136,1,30,31,50,51,70,71]];
		poleLine = [2,3,4,5,6,7,8,9,10,11,13,14,15,18,19,21,22,23,24,25,26,27,28,29,32,33,34,35,36,37,38,39,42,43,44,45,46,47,48,49,52,53,54,55,56,57,58,59,62,63,64,65,66,67,68,69,72,73,74,75,76,77,78,79,80,86,87,88,89,90,91,92,93,94,95,96,98,99,100,101,102,103,104,105,106,107,108,111,112,113,114,115,116,117,118,119,120,122,123,124,126,127,128,129,130,131,132,133,134,135,137,138,141,144,147,150,153,156,159,162,165,168];
		StartEnd = [1,169];
		p1 = 0, p2 = 0, p3 = 0, p4 = 0;
		Player = 1;
		nMap = 0;
		saveData();
		generateMaps();
	}
	function setData4(){
		setTimer();
		pole = [[4,5,4,1,1,1,1,1,1,1,5,4,5],[2,2,2,4,1,1,1,1,1,5,2,2,2],[2,2,2,3,1,1,1,1,5,2,2,2,2],[2,2,3,1,1,1,1,5,2,2,2,2,2],[2,3,1,1,1,1,1,6,2,2,2,2,2],[2,4,1,1,1,1,1,1,6,2,2,2,2],[2,2,4,1,1,1,1,1,1,6,2,2,2],[2,2,2,4,1,1,1,1,1,5,2,2,2],[2,2,2,2,8,1,1,1,5,2,2,2,2],[2,2,2,3,1,1,1,1,6,2,2,2,2],[2,2,3,1,1,1,1,1,1,6,2,2,2],[2,3,1,1,1,1,1,1,1,1,6,2,2],[3,1,1,1,1,1,1,1,1,1,1,6,7]];
		poleMap = [[49,50,69,70,71,72,73,74,75,76,77,14,13],[48,51,68,119,120,121,122,123,124,125,78,15,12],[47,52,67,118,117,116,115,114,113,126,79,16,11],[46,53,66,65,64,63,62,61,112,127,80,17,10],[45,54,55,56,57,58,59,60,111,128,81,18,9],[44,103,104,105,106,107,108,109,110,129,82,19,8],[43,102,137,136,135,134,133,132,131,130,83,20,7],[42,101,138,157,156,155,154,153,152,151,84,21,6],[41,100,139,158,169,168,167,166,165,150,85,22,5],[40,99,140,159,160,161,162,163,164,149,86,23,4],[39,98,141,142,143,144,145,146,147,148,87,24,3],[38,97,96,95,94,93,92,91,90,89,88,25,2],[37,36,35,34,33,32,31,30,29,28,27,26,1]];
		poleLine = [2,3,4,5,6,7,8,9,10,11,12,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,51,52,53,55,56,57,58,59,62,63,64,65,67,68,70,71,72,73,74,75,76,78,79,80,81,82,83,84,85,86,87,89,90,91,92,93,94,95,96,98,99,100,101,102,104,105,106,107,108,109,111,112,114,115,116,117,120,121,122,123,124,126,127,128,129,131,132,133,134,135,136,138,139,140,142,143,144,145,146,147,149,150,152,153,154,155,156,158,160,161,162,163,166,167,168];
		StartEnd = [1,169];
		p1 = 0, p2 = 0, p3 = 0, p4 = 0;
		Player = 1;
		nMap = 0;
		saveData();
		generateMaps();
	}
	function setData5(){
		setTimer();
		pole = [[4,1,1,1,1,1,1,1,1,1,1,1,5],[2,4,1,1,1,1,1,1,1,1,1,5,2],[2,2,4,1,1,1,1,1,1,1,5,2,2],[2,2,2,4,1,1,1,1,1,5,2,2,2],[2,2,2,2,4,1,1,1,5,2,2,2,2],[2,2,2,2,2,4,1,5,2,2,2,2,2],[2,2,2,2,2,2,9,2,2,2,2,2,2],[2,2,2,2,2,3,6,2,2,2,2,2,2],[2,2,2,2,3,1,1,6,2,2,2,2,2],[2,2,2,3,1,1,1,1,6,2,2,2,2],[2,2,3,1,1,1,1,1,1,6,2,2,2],[2,3,1,1,1,1,1,1,1,1,6,2,2],[3,1,1,1,1,1,1,1,1,1,1,6,7]];
		poleMap = [[25,24,23,22,21,20,19,18,17,16,15,14,13],[26,69,68,67,66,65,64,63,62,61,60,59,12],[27,70,105,104,103,102,101,100,99,98,97,58,11],[28,71,106,133,132,131,130,129,128,127,96,57,10],[29,72,107,134,153,152,151,150,149,126,95,56,9],[30,73,108,135,154,165,164,163,148,125,94,55,8],[31,74,109,136,155,166,169,162,147,124,93,54,7],[32,75,110,137,156,167,168,161,146,123,92,53,6],[33,76,111,138,157,158,159,160,145,122,91,52,5],[34,77,112,139,140,141,142,143,144,121,90,51,4],[35,78,113,114,115,116,117,118,119,120,89,50,3],[36,79,80,81,82,83,84,85,86,87,88,49,2],[37,38,39,40,41,42,43,44,45,46,47,48,1]];
		poleLine = [2,3,4,5,6,7,8,9,10,11,12,14,15,16,17,18,19,20,21,22,23,24,26,27,28,29,30,31,32,33,34,35,36,38,39,38,39,40,41,42,43,44,45,46,47,49,50,51,52,53,54,55,56,57,58,60,61,62,63,64,65,66,67,68,70,71,72,73,74,75,76,77,78,80,81,82,83,84,85,86,87,89,90,91,92,93,94,95,96,98,99,100,101,102,103,104,106,107,108,109,110,111,112,114,115,116,117,118,119,121,122,123,124,125,126,128,129,130,131,132,134,135,136,137,138,140,141,142,143,145,146,147,148,150,151,152,154,155,156,158,159,161,162,164,166];
		StartEnd = [1,169];
		p1 = 0, p2 = 0, p3 = 0, p4 = 0;
		Player = 1;
		nMap = 0;
		saveData();
		generateMaps();
	}
	function setData6(){
		setTimer();
		pole = [[8,5,4,5,4,5,4,5,4,5,4,5,8],[5,3,6,3,6,3,6,3,6,3,6,3,5],[6,4,5,4,5,4,5,4,5,4,5,4,6],[4,6,3,6,3,6,3,6,3,6,3,6,4],[3,5,4,5,4,5,4,5,4,5,4,5,3],[5,3,6,3,6,3,6,3,6,3,6,3,5],[6,4,5,4,5,4,5,4,5,4,5,4,6],[4,6,3,6,3,6,3,6,3,6,3,6,4],[3,5,4,5,4,5,4,5,4,5,4,5,3],[5,3,6,3,6,3,6,3,6,3,6,3,5],[6,4,5,4,5,4,5,4,5,4,5,4,6],[4,6,3,6,3,6,3,6,3,6,3,6,8],[3,1,1,1,1,1,1,1,1,1,1,1,10]];
		poleMap = [[1,2,5,6,9,10,13,14,17,18,21,22,null],[null,3,4,7,8,11,12,15,16,19,20,23,24],[null,46,45,42,41,38,37,34,33,30,29,26,25],[48,47,44,43,40,39,36,35,32,31,28,27,null],[49,50,53,54,57,58,61,62,65,66,69,70,null],[null,51,52,55,56,59,60,63,64,67,68,71,72],[null,94,93,90,89,86,85,82,81,78,77,74,73],[96,95,92,91,88,87,84,83,80,79,76,75,null],[97,98,101,102,105,106,109,110,113,114,117,118,null],[null,99,100,103,104,107,108,111,112,115,116,119,120],[null,142,141,138,137,134,133,130,129,126,125,122,121],[144,143,140,139,136,135,132,131,128,127,124,123,null],[145,146,147,148,149,150,151,152,153,154,155,156,157]];
		poleLine = [146,147,148,149,150,151,152,153,154,155,156];
		StartEnd = [1,157];
		p1 = 0, p2 = 0, p3 = 0, p4 = 0;
		Player = 1;
		nMap = 0;
		saveData();
		generateMaps();
	}

	function downloadFile() {
		var dataStr = "data:text/json;charset=utf-8," +
									'pole ' + encodeURIComponent(JSON.stringify(pole)) + '\n\n' +
									'poleMap ' + encodeURIComponent(JSON.stringify(poleMap)) + '\n\n' +
									'poleLine ' + encodeURIComponent(JSON.stringify(poleLine)) + '\n\n' +
									'StartEnd ' + encodeURIComponent(JSON.stringify(StartEnd));

		var dlAnchorElem = document.getElementById('downloadAnchorElem');
		dlAnchorElem.setAttribute("href",dataStr);
		dlAnchorElem.setAttribute("download", "pole.txt");
		dlAnchorElem.click();
	}

		// Проверка того, что наш браузер поддерживает Service Worker API.
	if ('serviceWorker' in navigator) {
		// Весь код регистрации у нас асинхронный.
		navigator.serviceWorker.register('./sw.js')
		.then(() => navigator.serviceWorker.ready.then((worker) => {
			worker.sync.register('syncdata');
		}))
		.catch((err) => console.log(err));
	}

</script>


</body>
</html>

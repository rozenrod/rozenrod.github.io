<html>
  <head>
    <meta charset="utf-8">


    <title>AniLibria iPad</title>
    <meta property="og:site_name" content="AniLibria iPad">
    <meta property="og:type" content="Website">
    <meta property="og:title" content="AniLibria - так звучит аниме!">
    <meta property="og:description" content="Смотреть аниме онлайн в любимой озучке.">
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0" />
    <link rel="icon" id="appIcon" type="image/png" href="Logo.png">
    <link rel="stylesheet" type="text/css" href="theme2.css" />
    <link rel="stylesheet" type="text/css" href="main.css" />
    <link rel="manifest" href="manifest.json">
    <!-- <link rel="manifest" href="manifest.webmanifest"> -->
    <script type="text/javascript" src="playerjs.js" ></script>
    <script src="https://code.jquery.com/jquery-3.6.0.slim.js" integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" ></script>
    <script type="text/javascript" src="theme.js" ></script>

    <!-- iOS web app configuration -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AniLibria iPad">

    <!-- iOS web app icons -->
    <link rel="apple-touch-icon" href="Logo-120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="Logo-152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="Logo-167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="Logo-180.png">
    <!-- iOS splash screens -->
    <!-- iPad -->
    <link rel="apple-touch-startup-image" href="Logo.png">

  </head>
  <body ontouchstart="">
    <header>
      <div class="block_header">
        <a href="index.html" style="color: var(--card-text-color-2);background: var(--card-background-3);">Главная</a>
        <a href="catalog.html">Каталог</a>
        <a href="favorites.html">Избранное</a>
        <form class="block_search" method="get" action="search.html">
          <input type="text" name="q" class="search_box" placeholder="Поиск релиза...">
          <button type="submit" class="search_button">Найти</button>
        </form>
        <button type="submit" class="theme" id="b_theme1" onclick="theme1()" style="display: none;">День</button>
        <button type="submit" class="theme" id="b_theme2" onclick="theme2()">Ночь</button>
      </div>
    </header>
    <div class="article-block">
      <center>
        <div class="article-list block_header_small">
          <a href="/" class="block_header_small_a">Расписание</a>
          <a href="/" class="block_header_small_a">Случайный релиз</a>
        </div>

        <!-- <div class="article-list block_header_small block_slider" id="article_block_small" style="overflow-x: scroll;white-space: nowrap;">
          <h1>Популярное</h1>
            <div class="article"style="margin-top: 45px;width: 200px;height: 290px;background-image: url('https://www.anilibria.tv')">
              <div class="article-text">
                <p class="article-name">'+data[i]["names"]["ru"]+'</p>
                <a style="width: calc(100% - 130px);margin: 20px 50px;" class="article_rel" href="/release.html?id='+data[i]["id"]+'">Смотреть</a>
                <div class="article_ser">Серия '+data[i]["player"]["series"]["last"]+'</div>
              </div>
            </div>
          </div> -->
          <div class="article-list block_header_small block_slider" id="article_block_small" style="overflow-x: scroll;white-space: nowrap;">
            <h1>Популярное</h1>

            </div>

          <script type="text/javascript">
            fetch('https://api.anilibria.tv/v2/advancedSearch?query={season.code} == 1 and 2 and 3 and 4&order_by=in_favorites&sort_direction=1&filter=id,names,poster,description,player,type&limit=10')
            .then(function (response) {
              if (response.status !== 200) {
                return Promise.reject(new Error(response.statusText))
              }
              return Promise.resolve(response)
            })
            .then(function (response) {
              return response.json()
            })
            .then(function (data) {
              for (let i = 0; data[i]; i++) {

                var div = document.createElement('div');
                document.getElementById('article_block_small').appendChild(div);
                div.className = 'article';
                div.setAttribute("style", "background-image: url('https://www.anilibria.tv"+data[i]["poster"]["url"]+"');margin-top: 45px;width: 200px;height: 290px;");
                div.innerHTML = '              <div class="article-text"> <p class="article-name">'+data[i]["names"]["ru"]+'</p> <a style="width: calc(100% - 130px);margin: 20px 50px;" class="article_rel" href="release.html?id='+data[i]["id"]+'">Смотреть</a> <div class="article_ser">Серия '+data[i]["player"]["series"]["last"]+'</div> </div>';

              }
            })

            .catch(function (error) {
              console.log('error', error)
            })

          </script>


          <br /><br />

        <div class="article-list block_header_small" id="article_block">
          <!-- <div class="article" style="background-image: url('https://www.anilibria.tv')">
              <div class="article-text">
                <p class="article-name"></p>
                <p class="article-description"></p>
                <a class="article_rel" href="">Смотреть</a>
                <div class="article_ser">Серия</div>
              </div>
          </div> -->
          <script type="text/javascript">

            fetch('https://api.anilibria.tv/v2/getUpdates?limit=24&filter=id,season,type,names,poster,genres,description,playlist,player,in_favorites')
            .then(function (response) {
              if (response.status !== 200) {
                return Promise.reject(new Error(response.statusText))
              }
              return Promise.resolve(response)
            })
            .then(function (response) {
              return response.json()
            })
            .then(function (data) {
              for (let i = 0; data[i]; i++) {
                var div = document.createElement('div');
                document.getElementById('article_block').appendChild(div);
                div.className = 'article';
                div.setAttribute("style", "background-image: url('https://www.anilibria.tv"+data[i]["poster"]["url"]+"')");
                div.innerHTML = '<div class="article-text"><p class="article-name">'+data[i]["names"]["ru"]+'</p><p class="article-description">'+data[i]["description"]+'</p><a class="article_rel" href="release.html?id='+data[i]["id"]+'">Смотреть</a><div class="article_ser">Серия '+data[i]["player"]["series"]["last"]+'</div></div>';

              }
            })

            .catch(function (error) {
              console.log('error', error)
            })

          </script>
        </div>

      </center>
    </div>
    <br /><br /><br /><br />


<script type="text/javascript" src="script.js" ></script>
</body>
</html>
